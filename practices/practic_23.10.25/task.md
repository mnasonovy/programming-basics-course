# Лабораторная работа: Серединный перпендикуляр к отрезку

## Условие задачи

С клавиатуры вводятся координаты двух точек на плоскости.  
Если через них проходит единственная прямая, нужно вывести координаты серединного перпендикуляра:
- координаты середины отрезка;
- координаты точки, полученной на перпендикуляре, на расстоянии, равном длине отрезка.

**В функции `main`:**
- чтение входных данных,
- проверка корректности (точки не совпадают),
- вывод результата.

**В функции `middleNormal`** — все вычисления.

---

## Теоретический раздел

### 1. Середина отрезка

Для точек $A(x_1, y_1)$ и $B(x_2, y_2)$:

$$
M\left(\frac{x_1 + x_2}{2}, \frac{y_1 + y_2}{2}\right)
$$

### 2. Длина отрезка $AB$

$$
L = \sqrt{(x_2 - x_1)^2 + (y_2 - y_1)^2}
$$

### 3. Направляющий вектор прямой $AB$

$$
\vec{AB} = (x_2 - x_1, \, y_2 - y_1)
$$

Перпендикулярный вектор к нему (на 90°):

$$
\vec{n} = (- (y_2 - y_1), \, x_2 - x_1)
$$

### 4. Координаты точки на перпендикуляре, на расстоянии $L$ от середины

Для середины $M(x_m, y_m)$ и вектора нормали $\vec{n} = (n_x, n_y)$ длины $|\vec{n}|$:

$$
x_p = x_m + \frac{n_x}{|\vec{n}|} \cdot L, \quad y_p = y_m + \frac{n_y}{|\vec{n}|} \cdot L
$$

где  
$$
|\vec{n}| = \sqrt{n_x^2 + n_y^2}
$$

---

## Алгоритм программы

1. Ввести координаты $x_1, y_1, x_2, y_2$.
2. Проверить, что точки не совпадают.
3. Вычислить середину $M(x_m, y_m)$.
4. Найти длину отрезка $L$.
5. Определить перпендикулярный вектор $\vec{n}$.
6. Нормировать вектор $\vec{n}$ и вычислить точку $P(x_p, y_p)$ на расстоянии $L$.
7. Вывести координаты $M$ и $P$.

---

## Код программы

```
#include <stdio.h>
#include <math.h>

// Функция вычисляет середину отрезка и координаты точки на серединном перпендикуляре
void middleNormal(double x1, double y1, double x2, double y2,
                  double *xm, double *ym, double *xp, double *yp) {
    // Середина отрезка
    *xm = (x1 + x2) / 2.0;
    *ym = (y1 + y2) / 2.0;

    // Длина отрезка
    double dx = x2 - x1;
    double dy = y2 - y1;
    double L = sqrt(dx * dx + dy * dy);

    // Перпендикулярный вектор
    double nx = -dy;
    double ny = dx;

    // Нормализация вектора
    double nlen = sqrt(nx * nx + ny * ny);
    nx /= nlen;
    ny /= nlen;

    // Координаты точки на перпендикуляре на расстоянии L
    *xp = *xm + nx * L;
    *yp = *ym + ny * L;
}

int main(void) {
    double x1, y1, x2, y2;

    printf("Enter coordinates of two points on the plane:\n");
    printf("  Point A (x1 y1): ");
    if (scanf("%lf %lf", &x1, &y1) != 2) {
        printf("Error: invalid input for point A.\n");
        return 1;
    }

    printf("  Point B (x2 y2): ");
    if (scanf("%lf %lf", &x2, &y2) != 2) {
        printf("Error: invalid input for point B.\n");
        return 1;
    }

    // Проверка совпадения точек
    if (x1 == x2 && y1 == y2) {
        printf("Error: points coincide, line cannot be constructed.\n");
        return 1;
    }

    double xm, ym, xp, yp;
    middleNormal(x1, y1, x2, y2, &xm, &ym, &xp, &yp);

    printf("\n--- Results ---\n");
    printf("Midpoint: (%.3f, %.3f)\n", xm, ym);
    printf("Point on perpendicular: (%.3f, %.3f)\n", xp, yp);

    return 0;
}

```

---

## Примеры для тестирования

| № | Ввод $(x_1, y_1, x_2, y_2)$ | Середина $M(x_m, y_m)$ | Точка на перпендикуляре $P(x_p, y_p)$ |
|:-:|:-----------------------------|:------------------------|:--------------------------------------|
| 1 | 0 0 4 0 | $(2.0, 0.0)$ | $(2.0, 4.0)$ |
| 2 | 1 1 3 5 | $(2.0, 3.0)$ | $(-1.0, 4.0)$ |
| 3 | -2 0 2 4 | $(0.0, 2.0)$ | $(-2.828, -0.828)$ |
 