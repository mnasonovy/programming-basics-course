# Вычисление значения многочлена и его производной в заданной точке

---

## 1. Условие задачи

Последовательность чисел представляет собой коэффициенты многочлена по возрастанию степеней.  
Требуется вычислить:
- значение многочлена $P(x)$ в заданной точке $x$;
- значение производной $P'(x)$ в той же точке $x$.

---

## 2. Теоретическая справка

Многочлен степени $n$ имеет вид:

$$
P(x) = a_0 + a_1x + a_2x^2 + \dots + a_nx^n
$$

где:
- $a_0, a_1, \dots, a_n$ — коэффициенты многочлена (вводятся по возрастанию степеней),
- $x$ — заданная точка, в которой требуется вычислить $P(x)$ и $P'(x)$.

Прямая формула вычисления многочлена требует большого числа операций, так как нужно вычислять $x^2, x^3, \dots, x^n$.  
Чтобы упростить процесс, используется **алгоритм Горнера**.

### Суть алгоритма Горнера

Многочлен можно переписать в виде:

$$
P(x) = (\dots((a_nx + a_{n-1})x + a_{n-2})x + \dots + a_0)
$$

Такой подход позволяет вычислить $P(x)$ за $n$ умножений и $n$ сложений.

### Одновременное вычисление $P(x)$ и $P'(x)$

Производная многочлена равна:

$$
P'(x) = a_1 + 2a_2x + 3a_3x^2 + \dots + n a_n x^{n-1}
$$

Но с помощью алгоритма Горнера можно вычислить и $P(x)$, и $P'(x)$ одновременно, используя следующие рекуррентные формулы:

$$
\begin{cases}
b_n = a_n \\
c_n = 0 \\
b_k = a_k + x \cdot b_{k+1} \\
c_k = b_{k+1} + x \cdot c_{k+1}
\end{cases}
$$

После окончания цикла:
- $b_0$ будет содержать $P(x)$,
- $c_0$ — значение $P'(x)$.

---

## 3. Алгоритм программы

1. Считать степень многочлена $n$.
2. Выделить память под $(n+1)$ коэффициентов $a_0, a_1, ..., a_n$.
3. Ввести коэффициенты по возрастанию степеней.
4. Ввести значение $x$.
5. Инициализировать:
    - $b = a_n$ — значение многочлена на текущем шаге,
    - $c = 0$ — значение производной на текущем шаге.
6. Для $k$ от $n-1$ до $0$ выполнить:
    - $c = c \cdot x + b$
    - $b = b \cdot x + a_k$
7. Вывести результаты:
    - $P(x) = b$
    - $P'(x) = c$
8. Освободить выделенную память.

---

## 4. Код программы

```c
#include <stdio.h>
#include <stdlib.h>

// Программа вычисляет значение многочлена и его производной в заданной точке x
// с использованием алгоритма Горнера

int main(void) {
    int n;

    // --- Ввод степени многочлена ---
    printf("Enter the degree of the polynomial (n): ");
    scanf("%d", &n);

    // --- Выделение памяти под (n + 1) коэффициентов ---
    double *a = (double *)malloc((n + 1) * sizeof(double));
    if (a == NULL) {
        printf("Error: not enough memory.\n");
        return 1;
    }

    // --- Ввод коэффициентов a[0] до a[n] ---
    printf("Enter %d coefficients (from a[0] to a[%d]):\n", n + 1, n);
    for (int i = 0; i <= n; ++i) {
        printf("a[%d] = ", i);
        scanf("%lf", &a[i]);
    }

    // --- Ввод точки x ---
    double x;
    printf("Enter the value of x: ");
    scanf("%lf", &x);

    // --- Переменные для вычисления ---
    double b = a[n]; // значение многочлена
    double c = 0.0;  // значение производной

    // --- Алгоритм Горнера ---
    for (int k = n - 1; k >= 0; --k) {
        c = c * x + b;    // новое значение производной
        b = b * x + a[k]; // новое значение самого многочлена
    }

    // --- Вывод результатов ---
    printf("\n--- Results ---\n");
    printf("P(x)  = %.6lf\n", b);
    printf("P'(x) = %.6lf\n", c);

    // --- Освобождение памяти ---
    free(a);
    return 0;
}
```

---

## 5. Пример работы программы

**Example:**
```
Enter the degree of the polynomial (n): 3
Enter 4 coefficients (from a[0] to a[3]):
a[0] = 2
a[1] = 3
a[2] = 5
a[3] = 7
Enter the value of x: 2

--- Results ---
P(x)  = 84.000000
P'(x) = 107.000000
```

**Пояснение:**
$$
P(x) = 2 + 3x + 5x^2 + 7x^3 = 2 + 6 + 20 + 56 = 84
$$


$$
P'(x) = 3 + 10x + 21x^2 = 3 + 20 + 84 = 107
$$
Результат подтверждает корректность работы алгоритма.
