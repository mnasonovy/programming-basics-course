# –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è –ø–æ CMake

–≠—Ç–æ—Ç –Ω–∞–±–æ—Ä –∑–∞–¥–∞–Ω–∏–π –ø–æ–º–æ–∂–µ—Ç –æ—Ç—Ä–∞–±–æ—Ç–∞—Ç—å –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞–≤—ã–∫–∏ —Ä–∞–±–æ—Ç—ã —Å CMake: –æ—Ç –±–∞–∑–æ–≤–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ –¥–æ —Å–±–æ—Ä–∫–∏ —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏ –∏ —ç–∫—Å–ø–æ—Ä—Ç–æ–º –ø–∞–∫–µ—Ç–æ–≤.

---

## üîπ **–ó–∞–¥–∞–Ω–∏–µ 1. Hello CMake**
**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –∏ —Å–æ–±—Ä–∞—Ç—å –µ–≥–æ.

1. –°–æ–∑–¥–∞–π —Ñ–∞–π–ª `CMakeLists.txt`.
2. –ó–∞–¥–∞–π –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é: `cmake_minimum_required(VERSION 3.16)`.
3. –û–±—ä—è–≤–∏ –ø—Ä–æ–µ–∫—Ç `project(HelloCMake LANGUAGES C)`.
4. –î–æ–±–∞–≤—å –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª `add_executable(hello main.c)`.
5. –ù–∞–ø–∏—à–∏ –ø—Ä–æ—Å—Ç—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–≤–æ–¥–∏—Ç `Hello, CMake!`.
6. –°–æ–±–µ—Ä–∏ –ø—Ä–æ–µ–∫—Ç:
   ```
   cmake -S . -B build
   cmake --build build
   ./build/hello
   ```

---

## üîπ **–ó–∞–¥–∞–Ω–∏–µ 2. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤**
**–¶–µ–ª—å:** –û—Å–≤–æ–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å `target_include_directories`.

1. –†–∞–∑–¥–µ–ª–∏ –ø—Ä–æ–µ–∫—Ç –Ω–∞ `src/` –∏ `include/`.
2. –î–æ–±–∞–≤—å –≤ `include/utils.h` —Ñ—É–Ω–∫—Ü–∏—é `void greet();`.
3. –í `src/utils.c` —Ä–µ–∞–ª–∏–∑—É–π `greet()` —Å –≤—ã–≤–æ–¥–æ–º —Å—Ç—Ä–æ–∫–∏.
4. –í `main.c` –≤—ã–∑–æ–≤–∏ `greet()`.
5. –í CMake –¥–æ–±–∞–≤—å:
   ```cmake
   target_include_directories(hello PUBLIC include)
   ```
6. –£–±–µ–¥–∏—Å—å, —á—Ç–æ —Å–±–æ—Ä–∫–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç.

---

## üîπ **–ó–∞–¥–∞–Ω–∏–µ 3. –°–æ–∑–¥–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏**
**–¶–µ–ª—å:** –û—Å–≤–æ–∏—Ç—å `add_library` –∏ `target_link_libraries`.

1. –°–æ–∑–¥–∞–π –±–∏–±–ª–∏–æ—Ç–µ–∫—É `mathlib` –≤ –ø–∞–ø–∫–µ `libs/math`.
2. –î–æ–±–∞–≤—å —Ñ–∞–π–ª `math.c` —Å —Ñ—É–Ω–∫—Ü–∏–µ–π `int add(int a, int b);`.
3. –í –æ—Å–Ω–æ–≤–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ:
   ```cmake
   add_subdirectory(libs/math)
   target_link_libraries(hello PRIVATE mathlib)
   ```
4. –°–æ–±–µ—Ä–∏ –ø—Ä–æ–µ–∫—Ç –∏ –ø—Ä–æ–≤–µ—Ä—å —Ä–∞–±–æ—Ç—É –ª–∏–Ω–∫–æ–≤–∫–∏.

---

## üîπ **–ó–∞–¥–∞–Ω–∏–µ 4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –±–∏–±–ª–∏–æ—Ç–µ–∫**
**–¶–µ–ª—å:** –ü–æ–Ω—è—Ç—å —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É STATIC –∏ SHARED.

1. –í CMakeLists –¥–æ–±–∞–≤—å –¥–≤–µ –≤–µ—Ä—Å–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `mathlib`: —Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é.
2. –ü–æ–ø—Ä–æ–±—É–π —Å–æ–±—Ä–∞—Ç—å –∏ —Å—Ä–∞–≤–Ω–∏ —Ä–∞–∑–º–µ—Ä –∏—Ç–æ–≥–æ–≤–æ–≥–æ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞.
3. –ó–∞–º–µ–Ω–∏ `STATIC` –Ω–∞ `SHARED` –∏ –ø–æ–≤—Ç–æ—Ä–∏ —Å–±–æ—Ä–∫—É.

---

## üîπ **–ó–∞–¥–∞–Ω–∏–µ 5. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–±–æ—Ä–∫–∏**
**–¶–µ–ª—å:** –ù–∞—É—á–∏—Ç—å—Å—è —Å–æ–±–∏—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –≤ —Ä–∞–∑–Ω—ã—Ö —Ä–µ–∂–∏–º–∞—Ö.

1. –°–æ–±–µ—Ä–∏ –ø—Ä–æ–µ–∫—Ç –≤ `Debug` –∏ `Release`:
   ```
   cmake -S . -B build/Debug -DCMAKE_BUILD_TYPE=Debug
   cmake -S . -B build/Release -DCMAKE_BUILD_TYPE=Release
   ```
2. –î–æ–±–∞–≤—å –≤ `main.c` –≤—ã–≤–æ–¥ –∑–Ω–∞—á–µ–Ω–∏—è –º–∞–∫—Ä–æ—Å–∞ `NDEBUG` (–µ—Å–ª–∏ –æ–Ω –æ–ø—Ä–µ–¥–µ–ª—ë–Ω).
3. –°—Ä–∞–≤–Ω–∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –≤ –æ–±–æ–∏—Ö —Ä–µ–∂–∏–º–∞—Ö.

---

## üîπ **–ó–∞–¥–∞–Ω–∏–µ 6. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —á–µ—Ä–µ–∑ find_package**
**–¶–µ–ª—å:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É.

1. –£—Å—Ç–∞–Ω–æ–≤–∏ `OpenSSL` (Linux: `sudo apt install libssl-dev`).
2. –î–æ–±–∞–≤—å –≤ `CMakeLists.txt`:
   ```cmake
   find_package(OpenSSL REQUIRED)
   target_link_libraries(hello PRIVATE OpenSSL::SSL OpenSSL::Crypto)
   ```
3. –í `main.c` –ø—Ä–æ—Å—Ç–æ –ø–æ–¥–∫–ª—é—á–∏ `<openssl/ssl.h>` –∏ –≤—ã–≤–µ–¥–∏ –≤–µ—Ä—Å–∏—é.

---

## üîπ **–ó–∞–¥–∞–Ω–∏–µ 7. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ FetchContent**
**–¶–µ–ª—å:** –ù–∞—É—á–∏—Ç—å—Å—è –ø–æ–¥—Ç—è–≥–∏–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ Git.

1. –î–æ–±–∞–≤—å –≤ –ø—Ä–æ–µ–∫—Ç:
   ```cmake
   include(FetchContent)
   FetchContent_Declare(
     googletest
     GIT_REPOSITORY https://github.com/google/googletest.git
     GIT_TAG release-1.11.0
   )
   FetchContent_MakeAvailable(googletest)
   ```
2. –°–æ–∑–¥–∞–π —Ç–µ—Å—Ç `tests/test_math.cpp`.
3. –ü–æ–¥–∫–ª—é—á–∏ GoogleTest:
   ```cmake
   add_executable(tests tests/test_math.cpp)
   target_link_libraries(tests PRIVATE gtest_main mathlib)
   add_test(NAME math_tests COMMAND tests)
   ```
4. –ó–∞–ø—É—Å—Ç–∏ `ctest` –∏–∑ –ø–∞–ø–∫–∏ —Å–±–æ—Ä–∫–∏.

---

## üîπ **–ó–∞–¥–∞–Ω–∏–µ 8. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —ç–∫—Å–ø–æ—Ä—Ç**
**–¶–µ–ª—å:** –ù–∞—É—á–∏—Ç—å—Å—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–±–æ—Ä–∫–∏.

1. –î–æ–±–∞–≤—å —Å–µ–∫—Ü–∏—é:
   ```cmake
   install(TARGETS hello
     RUNTIME DESTINATION bin
     LIBRARY DESTINATION lib
     ARCHIVE DESTINATION lib/static)
   ```
2. –°–æ–±–µ—Ä–∏ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏ –ø—Ä–æ–µ–∫—Ç:
   ```
   cmake --install build --prefix /usr/local
   ```
3. –ü—Ä–æ–≤–µ—Ä—å –Ω–∞–ª–∏—á–∏–µ –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤ –≤ `/usr/local/bin`.

---

## üîπ **–ó–∞–¥–∞–Ω–∏–µ 9. –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞**
**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –û–°.

1. –°–æ–±–µ—Ä–∏ –ø—Ä–æ–µ–∫—Ç –Ω–∞ Linux –∏ Windows.
2. –ò—Å–ø–æ–ª—å–∑—É–π —É—Å–ª–æ–≤–∏–µ –≤ CMakeLists:
   ```cmake
   if(WIN32)
     message(STATUS "Windows build")
   elseif(UNIX)
     message(STATUS "Linux build")
   endif()
   ```
3. –£–±–µ–¥–∏—Å—å, —á—Ç–æ —Å–±–æ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –æ–±–µ–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö.

---

## üîπ **–ó–∞–¥–∞–Ω–∏–µ 10. –ë–æ–ª—å—à–æ–π –ø—Ä–æ–µ–∫—Ç (–º–∏–Ω–∏-—Ñ–∏–Ω–∞–ª)**
**–¶–µ–ª—å:** –°–∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –≤—Å—ë –∏–∑—É—á–µ–Ω–Ω–æ–µ.

1. –°–æ–∑–¥–∞–π —Å—Ç—Ä—É–∫—Ç—É—Ä—É:
   ```
   project_root/
   ‚îú‚îÄ src/
   ‚îÇ   ‚îú‚îÄ main.cpp
   ‚îÇ   ‚îî‚îÄ app.cpp
   ‚îú‚îÄ include/
   ‚îÇ   ‚îî‚îÄ app.h
   ‚îú‚îÄ libs/
   ‚îÇ   ‚îú‚îÄ math/
   ‚îÇ   ‚îÇ   ‚îî‚îÄ math.cpp
   ‚îÇ   ‚îî‚îÄ io/
   ‚îÇ       ‚îî‚îÄ io.cpp
   ‚îú‚îÄ tests/
   ‚îÇ   ‚îî‚îÄ test_app.cpp
   ‚îî‚îÄ CMakeLists.txt
   ```
2. –†–µ–∞–ª–∏–∑—É–π –∫–∞–∂–¥—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π target.
3. –°–≤—è–∂–∏ –∏—Ö —á–µ—Ä–µ–∑ `target_link_libraries`.
4. –ü–æ–¥–∫–ª—é—á–∏ —Ç–µ—Å—Ç—ã —á–µ—Ä–µ–∑ GoogleTest.
5. –î–æ–±–∞–≤—å —É—Å—Ç–∞–Ω–æ–≤–∫—É –∏ —ç–∫—Å–ø–æ—Ä—Ç –ø–∞–∫–µ—Ç–∞.

üìò –¶–µ–ª—å: –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π `cmake --build build` –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ `ctest`.

---

## **–†–µ–∑—É–ª—å—Ç–∞—Ç**
–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –∑–∞–¥–∞–Ω–∏–π —Ç—ã –Ω–∞—É—á–∏—à—å—Å—è:
- –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∏ —Å–æ–±–∏—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç—ã –ª—é–±–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏;
- —É–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏;
- —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è;
- –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫—É –ø—Ä–æ–µ–∫—Ç–æ–≤.
